# Theoretical Technical Report on Heracles V1 and V2

## Table of Contents

- [Theoretical Technical Report on Heracles V1 and V2](#theoretical-technical-report-on-heracles-v1-and-v2)
  - [Table of Contents](#table-of-contents)
  - [Introduction](#introduction)
  - [System Architecture](#system-architecture)
  - [Hardware Components and Specifications](#hardware-components-and-specifications)
    - [Actuation System](#actuation-system)
    - [Motor Distribution](#motor-distribution)
    - [Component Costs (October 2025 Estimates)](#component-costs-october-2025-estimates)
    - [Actuator Distribution and Fault Tolerance](#actuator-distribution-and-fault-tolerance)
  - [Dataset Description](#dataset-description)
  - [Software and Control Systems](#software-and-control-systems)
    - [Reinforcement Learning Framework](#reinforcement-learning-framework)
    - [Simulation Environments](#simulation-environments)
    - [Micro-Operation Integration](#micro-operation-integration)
  - [Integration with Advanced Features](#integration-with-advanced-features)
  - [Implementation Considerations](#implementation-considerations)
  - [Conclusion and Future Work](#conclusion-and-future-work)
  - [Document Data](#document-data)

## Introduction

The Heracles system is a theoretical humanoid robotics platform designed to explore advanced motion control, precise manipulation, and adaptive locomotion in simulated environments. Drawing inspiration from Project Hercules (20250306_01.md), the Application of Micro-Operation in Robot Motion Control (20250702_01.md), and the Dance Learning and Creation System (20250728_01.md), Heracles integrates sophisticated actuation systems, reinforcement learning (RL)-based control, and fault-tolerant pose estimation to enable human-like interactions. The system targets applications such as dance instruction, fine-grained object manipulation, and adaptive locomotion in varied simulated scenarios, with two versions: V1, a simplified humanoid with 46 actuators, and V2, an advanced iteration with 152 actuators and enhanced flexibility via a shrimp-shell-like waist structure.

Heracles emphasizes theoretical design and virtual validation, aligning with the termination of physical prototyping by October 2025. The system leverages simulation tools like Gazebo, MuJoCo, or ROS to test its capabilities, focusing on conceptual integrations of micro-operation decomposition for precise motion control and dance-inspired learning for adaptive behavior. This report details the system’s architecture, components, control mechanisms, and theoretical performance, providing a comprehensive foundation for future research reports.

## System Architecture

The Heracles system is designed as a modular, hierarchical platform with distinct hardware and software layers, enabling scalable control and data processing for complex humanoid motion. The architecture is divided into:

- **Hardware Layer**: Comprises stepper motors, motor drivers, gears, a central computing unit (Raspberry Pi 5), and a power supply. V1 features a rigid humanoid structure with 46 actuators, while V2 introduces a flexible waist with five segments, increasing the actuator count to 152 for enhanced dexterity.
- **Software Layer**: Includes a Python-based control stack running on the Raspberry Pi, integrating RL algorithms for motor control, micro-operation decomposition for granular motion sequencing, and APIs for inter-component communication. The software processes data from the S.O.F.I.A. dataset for training and simulation.
- **Data Flow**: Sensory inputs (e.g., motor revolutions, angles) are collected via the S.O.F.I.A. dataset, processed by the RL model, and translated into motor control signals via GPIO interfaces. Feedback loops ensure real-time adjustments, with fault-tolerant pose estimation (from 20250728_01.md) enhancing reliability.
- **APIs**: Custom APIs facilitate communication between the RL model, motor drivers, and simulation environments, using JSON-based protocols for data exchange (e.g., motion records from S.O.F.I.A.).

The micro-operation framework (20250702_01.md) decomposes complex motions into discrete sequences, enabling precise control of individual joints. Fault-tolerant pose estimation, inspired by the dance system, ensures robust performance by prioritizing high-reliability body parts (e.g., facial joints at 95% fault tolerance).

## Hardware Components and Specifications

### Actuation System

Both V1 and V2 use NEMA 17 stepper motors (model 57BYG250B, 1.2 N·m torque, 3A current) for actuation, paired with L298N motor drivers and spur gears (8-tooth input, 20-tooth output, gear ratio 2.5). The gear system amplifies torque as follows:

- **Gear Ratio Calculation**:  
  \( \text{Gear Ratio} = \frac{N_{\text{Driven}}}{N_{\text{Driving}}} = \frac{20}{8} = 2.5 \)
- **Amplified Torque**:  
  \( T_{\text{Amplified}} = \text{Gear Ratio} \times T_{\text{Motor}} = 2.5 \times 1.2 \, \text{N·m} = 3 \, \text{N·m} \)
- **Force Calculation**:  
  \( F = \frac{T}{r} = \frac{3 \, \text{N·m}}{0.02 \, \text{m}} = 150 \, \text{N} \)
- **Weight Equivalent**:  
  \( \text{KG} = \frac{F}{g} = \frac{150 \, \text{N}}{9.8 \, \text{m/s}^2} = 15.31 \, \text{kg} \)

**Variables**:
- \( T \): Torque (N·m)
- \( r \): Gear radius (0.02 m)
- \( F \): Force (N)
- \( \text{KG} \): Weight equivalent (kg)
- \( g \): Gravitational acceleration (9.8 m/s²)

### Motor Distribution

- **V1 (46 Motors Total)**:
  - **Neck**: 3 motors (XYZ axes, 1 motor per axis).
  - **Elbows**: 2 elbows, each with XY axes (2 motors per elbow, 4 total).
  - **Hips**: 2 hips, each with XY axes (2 motors per hip, 4 total).
  - **Knees**: 2 knees, each with XY axes (2 motors per knee, 4 total).
  - **Ankles**: 2 ankles, each with XY axes (2 motors per ankle, 4 total).
  - **Fingers/Toes**: None.

- **V2 (152 Motors Total)**:
  - **Neck**: 3 motors (XYZ axes, 1 motor per axis).
  - **Elbows**: 2 elbows, each with XY axes (2 motors per elbow, 4 total).
  - **Hips**: 2 hips, each with XY axes (2 motors per hip, 4 total).
  - **Knees**: 2 knees, each with XY axes (2 motors per knee, 4 total).
  - **Ankles**: 2 ankles, each with XY axes (2 motors per ankle, 4 total).
  - **Fingers**: 10 fingers per hand, 2 hands. Non-thumb fingers (8 per hand) have 3 joints, each with XY axes (2 motors per joint, 6 motors per finger, 48 motors for 8 fingers). Thumbs have 2 joints, each with XY axes (2 motors per joint, 4 motors per thumb, 10 motors for 2 thumbs). Total: 58 motors.
  - **Toes**: 10 toes per foot, 2 feet. Each toe has 3 joints, each with XY axes (2 motors per joint, 6 motors per toe, 60 motors total).
  - **Waist**: 5 segments, each with XYZ axes (3 motors per segment, 15 motors total).

### Component Costs (October 2025 Estimates)

- **Stepper Motors (57BYG250B)**: $5-25 USD/unit. V1: 46 × $15 (bulk average) = $690. V2: 152 × $15 = $2,280.
- **L298N Drivers**: $5-10 USD/unit. V1: 23 × $7.5 (bulk average) = $172.50. V2: 76 × $7.5 = $570 (assuming 2 motors per driver).
- **Raspberry Pi 5 (8GB)**: $80-100 USD/unit, estimated at $90.
- **Gears**: 8-tooth spur gear: $5-20 USD/unit, estimated at $12.50. 20-tooth spur gear: $10-60 USD/unit, estimated at $35. Each joint uses one gear pair. V1: 46 × ($12.50 + $35) = $2,185. V2: 152 × ($12.50 + $35) = $7,220.
- **Battery**: Not specified, estimated at $50-100 USD for sufficient capacity (e.g., 24V LiPo for 3A motors).

**Total Estimated Costs**:
- **V1**: Motors ($690) + Drivers ($172.50) + Raspberry Pi ($90) + Gears ($2,185) + Battery ($75) = ~$3,212.50.
- **V2**: Motors ($2,280) + Drivers ($570) + Raspberry Pi ($90) + Gears ($7,220) + Battery ($75) = ~$10,235.

### Actuator Distribution and Fault Tolerance

Actuators are distributed to align with human biomechanics, with fault-tolerance rates from the dance system (20250728_01.md):
- **Facial Joints**: 95% (not implemented in V1/V2 due to no facial actuators).
- **Head/Neck**: 90% (3 motors in both versions).
- **Torso/Waist**: 85% (V2: 15 motors across 5 segments; V1: none).
- **Limbs (Arms/Legs)**: 80% (V1: 16 motors for elbows, hips, knees, ankles; V2: same + 118 for fingers/toes).
- **Extremities (Fingers/Toes)**: 75% (V2: 58 finger motors, 60 toe motors; V1: none).

Fault tolerance ensures robust performance in simulations by prioritizing critical joints (e.g., neck, hips) for precise control.

## Dataset Description

The S.O.F.I.A. (Smart Omnidirectional Feedback for Intelligent Actuation) dataset is designed to support RL training and simulation of Heracles’ motion control. It includes:

- **Motion Records Data**:
  - **Forward/Backward Motion**: Tracks thigh Y-axis motor revolutions (e.g., steps for locomotion).
  - **Brake Status**: Binary (1 for enabled, 0 for disabled), indicating motor locking states.
  - **Angle Rotation**: Records X-axis motor revolutions for thigh orientation.
  - **Speed Information**: Captures rotational speed (RPM) of thigh Y-axis motors.

- **File Structure**:
  - **Outdoor Folder**: Contains video files (.mp4) and corresponding JSON files with per-frame motion data (revolutions, angles, speeds, brake status) for outdoor scenarios.
  - **Indoor Folder**: Similar structure for indoor scenarios, enabling environment-specific adaptation.

The dataset supports simulated training by providing ground-truth motion data for RL models, enabling validation in diverse scenarios (e.g., uneven terrain, confined spaces) using tools like Gazebo.

## Software and Control Systems

### Reinforcement Learning Framework

Heracles employs an RL framework to control stepper motors, following the steps outlined in the Heracles-notes.md:

1. **Hardware Setup**: Simulated Raspberry Pi 5 interfaces with virtual L298N drivers via GPIO.
2. **Software Installation**: Python libraries (e.g., RPi.GPIO, PyTorch) for motor control and RL training.
3. **Control Program**: Python scripts translate RL actions into motor pulses, controlling step angles (1.8° per step for 57BYG250B).
4. **RL Task Design**: Markov Decision Process (MDP) defined as:
   - **State**: Motor angles, velocities, brake status, and joint positions (from S.O.F.I.A. data).
   - **Action**: Motor step commands (e.g., clockwise/counterclockwise steps, speed adjustments).
   - **Reward**: Combines accuracy (proximity to target pose), energy efficiency (minimized current draw), and stability (minimized oscillations). Example: \( R = w_1 \cdot (1 - |\theta_{\text{target}} - \theta_{\text{actual}}|) - w_2 \cdot I_{\text{motor}} + w_3 \cdot (1 - \text{oscillation}) \), where \( w_i \) are weights.
5. **Training**: Uses Proximal Policy Optimization (PPO) for stable learning, trained in simulation (e.g., Gazebo) to optimize motor control.
6. **Feedback**: Simulated sensors provide real-time motor states, enabling closed-loop control.
7. **Real-Time Control**: Trained RL policy issues motor commands via GPIO in virtual environments.
8. **Optimization**: Iterative tuning of hyperparameters (e.g., learning rate, discount factor) ensures stable performance.

### Simulation Environments

Gazebo is preferred for physics-based validation due to its ROS integration and accurate dynamics modeling. MuJoCo is an alternative for faster simulations, focusing on joint dynamics. The RL model is trained on S.O.F.I.A. data, simulating indoor/outdoor scenarios to generalize across environments.

### Micro-Operation Integration

Micro-operations (20250702_01.md) decompose complex motions into discrete steps (e.g., 1.8° motor increments), enabling precise control. For example, a dance sequence is broken into joint-specific trajectories, with each motor executing a sequence of steps to achieve the desired pose.

## Integration with Advanced Features

Heracles integrates three key technologies:

- **Dance Practice (20250728_01.md)**: Video analysis extracts pose data, which is mapped to motor commands. The RL model learns from S.O.F.I.A. data to replicate dance moves, with fault-tolerant pose estimation ensuring 80-95% reliability across joints.
- **Micro-Operation (20250702_01.md)**: Motion segmentation enables granular control, e.g., sequencing finger movements for manipulation tasks. Real-time adjustments correct deviations within 10 ms.
- **Holistic Precision Tracking**: Tracks 100 points per body part (e.g., joint angles, velocities) for high-fidelity motion control, validated in simulation.

## Implementation Considerations

- **Backend Technologies**: Python with PyTorch for RL, ROS for simulation integration, and JSON for data handling. Gazebo simulations run on a virtual Raspberry Pi 5 with 8GB RAM.
- **Scalability**: V1 (46 motors) is computationally feasible, but V2 (152 motors) demands high-performance computing (e.g., GPU acceleration for RL training).
- **Limitations**: High motor count in V2 increases latency (estimated 50-100 ms per control cycle). Simulation fidelity may limit generalization to real-world dynamics.
- **Ethical/Privacy Aspects**: Simulated data (S.O.F.I.A.) avoids real-world privacy concerns, but ethical considerations include ensuring unbiased motion models and secure data storage in research dissemination.

## Conclusion and Future Work

Heracles represents a sophisticated theoretical framework for humanoid robotics, integrating micro-operation control, RL-based motor actuation, and dance-inspired learning. V1 offers a cost-effective, simplified platform, while V2 enhances flexibility with a segmented waist and detailed extremity control. Future work includes multimodal simulations (e.g., combining vision and tactile data), expanded S.O.F.I.A. datasets, and integration with advanced RL algorithms like SAC. The shift to research reports ensures continued dissemination of these innovations, advancing the field of simulated humanoid robotics.

## Document Data

- Author: Carson Wu
- Document Identification Code: 20251007_01
- The development timeline: 2016 - Present
